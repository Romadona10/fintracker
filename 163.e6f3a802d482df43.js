"use strict";(self.webpackChunkFintracker=self.webpackChunkFintracker||[]).push([[163],{163:(B,E,i)=>{i.r(E),i.d(E,{CategoriesModule:()=>w});var u=i(177),g=i(8498),t=i(7705),y=i(5596),h=i(6850);let k=(()=>{class o{constructor(e){this.router=e}ngOnInit(){this.router.navigate(["/categories/categories-lists"])}onTabChange(e){switch(e){case 0:this.router.navigate(["categories/categories-lists"]);break;case 1:this.router.navigate(["categories/add-category"]);break;case 2:this.router.navigate(["categories/edit-category"])}}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-categories"]],decls:8,vars:0,consts:[[3,"selectedIndexChange"],["label","Categories-Lists"],["label","Add"],["label","Edit"]],template:function(a,r){1&a&&(t.j41(0,"mat-card")(1,"mat-card-title"),t.EFF(2,"Categories"),t.k0s(),t.j41(3,"mat-tab-group",0),t.bIt("selectedIndexChange",function(d){return r.onTabChange(d)}),t.nrm(4,"mat-tab",1)(5,"mat-tab",2)(6,"mat-tab",3),t.k0s(),t.nrm(7,"router-outlet"),t.k0s())},dependencies:[g.n3,y.RN,y.dh,h.mq,h.T8]})}}return o})();var C=i(5416),I=i(9437),M=i(8810),O=i(1626);let b=(()=>{class o{constructor(e){this.http=e,this.apiUrl="https://expensetracker-backend-q5pq.onrender.com/api/categories"}getCategories(){return this.http.get(this.apiUrl).pipe((0,I.W)(e=>(console.error("Error fetching categories:",e),(0,M.$)(e))))}getCategoryById(e){return this.http.get(`${this.apiUrl}/${e}`)}addCategory(e){return this.http.post(this.apiUrl,e)}updateCategory(e,a){return this.http.put(`${this.apiUrl}/${e}`,a)}deleteCategory(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(a){return new(a||o)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var f=i(5911),l=i(9159),v=i(9213),p=i(8834);function j(o,c){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1," Category Name "),t.k0s())}function P(o,c){if(1&o&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&o){const e=c.$implicit;t.R7$(1),t.SpI(" ",e.name," ")}}function T(o,c){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1," Actions "),t.k0s())}function L(o,c){if(1&o){const e=t.RV6();t.j41(0,"mat-cell")(1,"button",12),t.bIt("click",function(){const n=t.eBV(e).$implicit,d=t.XpG(2);return t.Njj(d.onEditCategory(n))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",13),t.bIt("click",function(){const n=t.eBV(e).$implicit,d=t.XpG(2);return t.Njj(d.onDeleteCategory(n))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()}}function x(o,c){1&o&&t.nrm(0,"mat-header-row")}function $(o,c){1&o&&t.nrm(0,"mat-row")}function D(o,c){if(1&o&&(t.j41(0,"mat-table",5),t.qex(1,6),t.DNE(2,j,2,0,"mat-header-cell",7),t.DNE(3,P,2,1,"mat-cell",8),t.bVm(),t.qex(4,9),t.DNE(5,T,2,0,"mat-header-cell",7),t.DNE(6,L,7,0,"mat-cell",8),t.bVm(),t.DNE(7,x,1,0,"mat-header-row",10),t.DNE(8,$,1,0,"mat-row",11),t.k0s()),2&o){const e=t.XpG();t.Y8G("dataSource",e.categories),t.R7$(7),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns)}}function U(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",14)(1,"mat-icon"),t.EFF(2,"category"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No categories found. Start by adding a new category."),t.k0s(),t.j41(5,"button",15),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.onAddCategory())}),t.EFF(6,"Add Category"),t.k0s()()}}let G=(()=>{class o{constructor(e,a,r){this.snackbar=e,this.categoryService=a,this.router=r,this.categories=[],this.displayedColumns=["name","actions"]}ngOnInit(){this.getCategories()}getCategories(){this.categoryService.getCategories().subscribe(e=>{this.categories=e},e=>{console.error("Error fetching categories:",e),this.snackbar.open("Error fetching categories","Close",{duration:3e3})})}onAddCategory(){this.router.navigate(["/categories/add-category"])}onEditCategory(e){this.router.navigate(["/categories/edit-category",e._id])}onDeleteCategory(e){this.categoryService.deleteCategory(e._id).subscribe(()=>{this.categories=this.categories.filter(a=>a._id!==e._id),this.snackbar.open("Category deleted successfully","Close",{duration:3e3})},a=>{console.error("Error deleting category:",a),this.snackbar.open("Error deleting category","Close",{duration:3e3})})}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(C.UG),t.rXU(b),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-categories-list"]],decls:9,vars:2,consts:[[1,"category-list-container","mat-elevation-z8"],["color","primary"],["mat-raised-button","","color","accent",1,"add-button",3,"click"],["class","mat-elevation-z1",3,"dataSource",4,"ngIf","ngIfElse"],["noCategories",""],[1,"mat-elevation-z1",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],[1,"empty-state"],["mat-raised-button","","color","primary",3,"click"]],template:function(a,r){if(1&a&&(t.j41(0,"div",0)(1,"mat-toolbar",1)(2,"span"),t.EFF(3,"Expense Categories"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return r.onAddCategory()}),t.EFF(5,"Add Category"),t.k0s()(),t.DNE(6,D,9,3,"mat-table",3),t.DNE(7,U,7,0,"ng-template",null,4,t.C5r),t.k0s()),2&a){const n=t.sdS(8);t.R7$(6),t.Y8G("ngIf",r.categories.length)("ngIfElse",n)}},dependencies:[u.bT,f.KQ,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,v.An,p.$z,p.iY],styles:[".category-list-container[_ngcontent-%COMP%]{margin:20px}.category-list-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{margin-left:auto}.category-list-container[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]{width:100%}.category-list-container[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%], .category-list-container[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{padding:16px}.category-list-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;margin:40px 0}.category-list-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;color:#757575;margin-bottom:10px}.category-list-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#757575}"]})}}return o})();var s=i(9417),m=i(882),_=i(7575),F=i(9631);function R(o,c){1&o&&t.nrm(0,"mat-progress-bar",10)}function N(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Category name is required "),t.k0s())}function X(o,c){1&o&&t.nrm(0,"mat-progress-bar",10)}function Y(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Category name is required "),t.k0s())}const A=[{path:"",component:k,children:[{path:"",redirectTo:"categories",pathMatch:"full"},{path:"categories-lists",component:G},{path:"add-category",component:(()=>{class o{constructor(e,a,r,n){this.fb=e,this.categoryService=a,this.snackbar=r,this.router=n,this.isLoading=!1,this.categoryForm=this.fb.group({name:["",s.k0.required]})}ngOnInit(){}onSubmit(){this.categoryForm.valid&&(this.isLoading=!0,this.categoryService.addCategory(this.categoryForm.value).subscribe(()=>{this.isLoading=!1,this.snackbar.open("Category added successfully","Close",{duration:3e3}),this.router.navigate(["/categories/categories-lists"])},e=>{this.isLoading=!1,console.error("Error adding category:",e),this.snackbar.open("Error adding category","Close",{duration:3e3})}))}onCancel(){this.router.navigate(["/categories"])}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(s.ok),t.rXU(b),t.rXU(C.UG),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-add-category"]],decls:16,vars:5,consts:[[1,"add-category-form","mat-elevation-z8"],["color","primary"],["mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","formControlName","name","placeholder","Enter category name"],[4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","warn","type","button",3,"disabled","click"],["mode","indeterminate"]],template:function(a,r){if(1&a&&(t.j41(0,"div",0)(1,"mat-toolbar",1)(2,"span"),t.EFF(3,"Add New Category"),t.k0s()(),t.DNE(4,R,1,0,"mat-progress-bar",2),t.j41(5,"form",3),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(6,"mat-form-field",4)(7,"mat-label"),t.EFF(8,"Category Name"),t.k0s(),t.nrm(9,"input",5),t.DNE(10,N,2,0,"mat-error",6),t.k0s(),t.j41(11,"div",7)(12,"button",8),t.EFF(13,"Save"),t.k0s(),t.j41(14,"button",9),t.bIt("click",function(){return r.onCancel()}),t.EFF(15,"Cancel"),t.k0s()()()()),2&a){let n;t.R7$(4),t.Y8G("ngIf",r.isLoading),t.R7$(1),t.Y8G("formGroup",r.categoryForm),t.R7$(5),t.Y8G("ngIf",(null==(n=r.categoryForm.get("name"))?null:n.hasError("required"))&&(null==(n=r.categoryForm.get("name"))?null:n.touched)),t.R7$(2),t.Y8G("disabled",r.categoryForm.invalid||r.isLoading),t.R7$(2),t.Y8G("disabled",r.isLoading)}},dependencies:[u.bT,f.KQ,m.rl,m.nJ,m.TL,p.$z,_.HM,F.fg,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],styles:[".add-category-form[_ngcontent-%COMP%]{margin:20px}.add-category-form[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{margin-bottom:20px}.add-category-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.add-category-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.add-category-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]})}}return o})()},{path:"edit-category/:id",component:(()=>{class o{constructor(e,a,r,n,d){this.fb=e,this.categoryService=a,this.route=r,this.snackbar=n,this.router=d,this.categoryId="",this.isLoading=!1,this.categoryForm=this.fb.group({name:["",s.k0.required]})}ngOnInit(){this.categoryId=this.route.snapshot.paramMap.get("id")||"",console.log("Retrieved categoryId:",this.categoryId),this.categoryId?this.loadCategory():(console.error("Category ID is missing from the route"),this.snackbar.open("Invalid category ID","Close",{duration:3e3}),this.router.navigate(["/categories"]))}loadCategory(){this.isLoading=!0,this.categoryService.getCategoryById(this.categoryId).subscribe(e=>{this.isLoading=!1,e?this.categoryForm.patchValue({name:e.name}):(this.isLoading=!1,console.error("Category not found"),this.snackbar.open("Category not found","Close",{duration:3e3}))},e=>{console.error("Error loading category:",e),this.snackbar.open("Error loading category","Close",{duration:3e3})})}onUpdate(){this.categoryForm.valid&&this.categoryService.updateCategory(this.categoryId,this.categoryForm.value).subscribe(()=>{this.isLoading=!1,this.snackbar.open("Category updated successfully, check Lists","Close",{duration:3e3})},e=>{this.isLoading=!1,console.error("Error updating category:",e),this.snackbar.open("Error updating category","Close",{duration:3e3})})}onCancel(){this.router.navigate(["/categories"])}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(s.ok),t.rXU(b),t.rXU(g.nX),t.rXU(C.UG),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-edit-category"]],decls:16,vars:5,consts:[[1,"edit-category-form","mat-elevation-z8"],["color","primary"],["mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","formControlName","name","placeholder","Edit category name"],[4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","warn","type","button",3,"disabled","click"],["mode","indeterminate"]],template:function(a,r){if(1&a&&(t.j41(0,"div",0)(1,"mat-toolbar",1)(2,"span"),t.EFF(3,"Edit Category"),t.k0s()(),t.DNE(4,X,1,0,"mat-progress-bar",2),t.j41(5,"form",3),t.bIt("ngSubmit",function(){return r.onUpdate()}),t.j41(6,"mat-form-field",4)(7,"mat-label"),t.EFF(8,"Category Name"),t.k0s(),t.nrm(9,"input",5),t.DNE(10,Y,2,0,"mat-error",6),t.k0s(),t.j41(11,"div",7)(12,"button",8),t.EFF(13,"Update"),t.k0s(),t.j41(14,"button",9),t.bIt("click",function(){return r.onCancel()}),t.EFF(15,"Cancel"),t.k0s()()()()),2&a){let n;t.R7$(4),t.Y8G("ngIf",r.isLoading),t.R7$(1),t.Y8G("formGroup",r.categoryForm),t.R7$(5),t.Y8G("ngIf",(null==(n=r.categoryForm.get("name"))?null:n.hasError("required"))&&(null==(n=r.categoryForm.get("name"))?null:n.touched)),t.R7$(2),t.Y8G("disabled",r.categoryForm.invalid||r.isLoading),t.R7$(2),t.Y8G("disabled",r.isLoading)}},dependencies:[u.bT,f.KQ,m.rl,m.nJ,m.TL,p.$z,_.HM,F.fg,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],styles:[".edit-category-form[_ngcontent-%COMP%]{margin:20px}.edit-category-form[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{margin-bottom:20px}.edit-category-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.edit-category-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.edit-category-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]})}}return o})()}]}];let V=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[g.iI.forChild(A),g.iI]})}}return o})(),w=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[u.MD,V,f.s5,m.RG,l.tP,v.m_,p.Hl,y.Hu,_.PO,h.RI,C._T,F.fS,s.X1,s.YN]})}}return o})()}}]);